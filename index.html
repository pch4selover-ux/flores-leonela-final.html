<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Señorita Leonela — Ramo de Tulipanes Lilas 🌷</title>

<!-- Fuentes elegantes -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Parisienne&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --lilac-1:#f4ecff;
    --lilac-2:#e4d0ff;
    --petal:#b98cf8;
    --petal-dark:#8f4fcf;
    --ink:#43294a;
    --glass: rgba(255,255,255,0.78);
    --heart:#ff7fbf;
  }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;background:radial-gradient(circle at 15% 20%, #fff8ff, #f6f0ff 35%, #fbf8ff 100%);color:var(--ink);-webkit-font-smoothing:antialiased}
  .wrap{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:22px}

  .card{
    width:100%;max-width:1100px;border-radius:20px;background:linear-gradient(180deg,var(--glass),rgba(255,255,255,0.66));box-shadow:0 20px 60px rgba(80,40,100,0.12);overflow:hidden;display:grid;grid-template-columns:1fr 480px;gap:18px;padding:18px;
  }

  /* LEFT column: text & controls */
  .left{padding:28px 26px;display:flex;flex-direction:column;justify-content:center;gap:12px}
  .title{font-family:'Great Vibes',cursive;font-size:64px;color:var(--petal-dark);margin:0;line-height:0.9;text-shadow:0 6px 18px rgba(143,79,207,0.14)}
  .subtitle{font-family:'Parisienne',cursive;font-size:20px;color:#57405a;margin-top:2px}
  .lead{font-size:18px;color:#4b3b4f;line-height:1.6;margin-top:8px;background:linear-gradient(180deg,rgba(255,255,255,0.6),transparent);padding:14px;border-radius:12px;box-shadow:inset 0 4px 12px rgba(255,255,255,0.5)}
  .note{font-size:14px;color:#6b4f6f}

  /* LIST (desktop fallback & accesible) */
  .controls{display:flex;gap:12px;flex-wrap:wrap;margin-top:8px;align-items:center}
  .play-btn{
    background:linear-gradient(90deg,var(--petal),var(--petal-dark));
    color:white;border:none;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 8px 20px rgba(143,79,207,0.18);
  }
  .mute-btn{background:transparent;border:2px solid rgba(75,35,95,0.08);padding:10px 14px;border-radius:10px;cursor:pointer}

  /* RIGHT column: bouquet */
  .right{position:relative;padding:12px;display:flex;align-items:center;justify-content:center}
  .garden{
    width:420px;height:620px;border-radius:16px;background:
      linear-gradient(180deg,rgba(255,255,255,0.95),rgba(245,240,255,0.8));
    box-shadow:inset 0 8px 30px rgba(255,255,255,0.6);
    position:relative;
    overflow:visible;
  }

  /* reference photo behind, subtle */
  .garden .ref{
    position:absolute;inset:12px;border-radius:12px;background-image:url('referencia.png');background-size:cover;background-position:center;opacity:0.12;filter:blur(2px) saturate(90%);pointer-events:none;
  }

  /* bouquet base */
  .base-wrap{position:absolute;left:50%;bottom:36px;transform:translateX(-50%);width:84%;height:88%;pointer-events:none}

  /* Tulip wrapper */
  .tulip{
    position:absolute;width:150px;height:200px;transform-origin:bottom center;pointer-events:auto;touch-action:manipulation;
    transition:transform .28s ease;
  }
  .tulip:active{transform:scale(.98) translateY(4px)}
  .tulip svg{width:100%;height:100%;display:block;filter:drop-shadow(0 8px 20px rgba(120,60,140,0.12))}

  /* subtle sway animation for realism */
  @keyframes gentleSway {
    0%{transform:translateY(0) rotate(-2deg)}
    50%{transform:translateY(-8px) rotate(3deg)}
    100%{transform:translateY(0) rotate(-2deg)}
  }
  .tulip.sway{animation:gentleSway 6.8s ease-in-out infinite}

  /* heart sparkles */
  .heart{
    position:absolute;width:22px;height:22px;border-radius:6px;transform:translate(-50%,-50%);pointer-events:none;opacity:0.95;
    animation:heartFloat 3.6s ease-in-out infinite;
  }
  @keyframes heartFloat{
    0%{transform:translateY(0) scale(1);opacity:0.95}
    50%{transform:translateY(-22px) scale(1.08);opacity:0.85}
    100%{transform:translateY(0) scale(1);opacity:0.95}
  }

  /* bubble message */
  .bubble{
    position:absolute;min-width:240px;max-width:320px;padding:14px 16px;border-radius:14px;background:linear-gradient(180deg,#fff,#fffafc);
    box-shadow:0 14px 40px rgba(80,40,100,0.14);color:#3e2742;font-size:16px;line-height:1.45;border:1px solid rgba(150,100,190,0.06);z-index:55;transform-origin:bottom center;animation:pop .16s ease;
  }
  .bubble .who{font-family:'Great Vibes',cursive;font-size:20px;color:var(--petal-dark);display:block;margin-bottom:6px}
  .bubble::after{content:'';position:absolute;left:50%;bottom:-10px;transform:translateX(-50%);width:18px;height:18px;background:linear-gradient(180deg,#fff,#fffafc);clip-path:polygon(50% 0,0 100%,100% 100%);}

  @keyframes pop{from{transform:scale(.94) translateY(8px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}

  /* responsive */
  @media (max-width:1050px){ .card{grid-template-columns:1fr 1fr} .garden{height:560px} }
  @media (max-width:820px){ .card{grid-template-columns:1fr;gap:14px} .garden{height:460px;width:92%;} .right{order:-1} .title{font-size:54px;text-align:center} .left{padding:16px}}
  @media (max-width:480px){
    .title{font-size:46px}
    .garden{height:420px}
    .bubble{min-width:180px;max-width:260px;font-size:15px}
  }
</style>
</head>

<body>
  <div class="wrap">
    <main class="card" role="main" aria-label="Tarjeta interactiva para Señorita Leonela">
      <section class="left">
        <h1 class="title">Señorita Leonela</h1>
        <div class="subtitle">Qué curioso… uno intenta mantenerse cuerdo, pero esta magia suya no se evita, se siente, y termina por quedarse.</div>
        <div class="lead">Toca una flor del ramo para leer un mensaje tierno. Para escuchar la canción, pulsa <strong>Reproducir música</strong>. (En móvil pulsa primero reproducir si el navegador lo requiere.)</div>

        <div class="controls">
          <button class="play-btn" id="playBtn" aria-pressed="false" onclick="toggleMusic()">🎵 Reproducir música</button>
          <button class="mute-btn" id="muteBtn" onclick="toggleMute()">🔊 Silenciar</button>
        </div>

        <p class="note">Coloca aquí en la misma carpeta: <code>referencia.png</code> (imagen de referencia) y <code>valiente.mp3</code> (audio).</p>
      </section>

      <aside class="right" aria-hidden="false">
        <div class="garden" id="garden" aria-label="Ramo de tulipanes lilas">
          <div class="ref" aria-hidden="true"></div>

          <div class="base-wrap" aria-hidden="true">
            <!-- Aquí colocamos los tulipanes (SVGs) con posiciones realistas -->
            <!-- Tulip 1 -->
            <div class="tulip sway" data-id="1" style="left:50%;bottom:12%;">
              <div class="hotspot" onclick="showMsg(1,this)"></div>
              <!-- SVG tulip: pétalos y tallo -->
              <svg viewBox="0 0 120 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <defs>
                  <linearGradient id="s1" x1="0" x2="0" y1="0" y2="1"><stop offset="0%" stop-color="#f9f3ff"/><stop offset="60%" stop-color="#e2c6ff"/><stop offset="100%" stop-color="#b98cf8"/></linearGradient>
                  <linearGradient id="stem" x1="0" x2="0" y1="0" y2="1"><stop offset="0%" stop-color="#86c58f"/><stop offset="100%" stop-color="#4f8f5a"/></linearGradient>
                </defs>
                <g transform="translate(60,120)">
                  <rect x="-6" y="0" width="12" height="120" rx="6" fill="url(#stem)"/>
                  <path d="M-18 30 C-36 6 -8 -38 2 -18" fill="#6fbf86" opacity="0.95"/>
                </g>
                <g transform="translate(60,48)">
                  <path d="M0,-60 C28,-62 46,-40 44,-10 C66,-4 60,30 34,50 C12,64 -8,62 -34,50 C-62,30 -54,-2 -28,-10 C-32,-40 -18,-60 0,-60 Z" fill="url(#s1)"/>
                  <path d="M0,-28 C8,-26 20,-16 16,-8 C26,-6 28,8 22,16 C12,28 0,30 -8,22 C-20,10 -22,2 -8,-6 C-8,-14 -4,-22 0,-28 Z" fill="rgba(255,255,255,0.55)"/>
                  <ellipse cx="0" cy="-6" rx="9" ry="7" fill="#3d183a" opacity="0.95"/>
                </g>
              </svg>
            </div>

            <!-- Tulip 2 -->
            <div class="tulip sway" data-id="2" style="left:36%;bottom:18%;transform:scale(.96) rotate(-6deg);">
              <div class="hotspot" onclick="showMsg(2,this)"></div>
              <svg viewBox="0 0 120 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <g transform="translate(60,120)">
                  <rect x="-5" y="0" width="10" height="110" rx="5" fill="url(#stem)"/>
                  <path d="M-22 34 C-44 10 -8 -36 2 -18" fill="#6fbf86" opacity="0.95"/>
                </g>
                <g transform="translate(60,48)">
                  <path d="M0,-56 C24,-58 40,-36 38,-8 C58,-2 52,28 30,44 C8,58 -12,56 -30,44 C-54,28 -46,-2 -24,-8 C-26,-36 -12,-56 0,-56 Z" fill="url(#s1)"/>
                  <circle cx="0" cy="-8" r="8" fill="#37133a" />
                </g>
              </svg>
            </div>

            <!-- Tulip 3 -->
            <div class="tulip sway" data-id="3" style="left:62%;bottom:20%;transform:scale(1.02) rotate(4deg);">
              <div class="hotspot" onclick="showMsg(3,this)"></div>
              <svg viewBox="0 0 120 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <g transform="translate(60,120)">
                  <rect x="-6" y="0" width="12" height="118" rx="6" fill="url(#stem)"/>
                  <path d="M6 36 C36 14 16 -24 4 -14" fill="#64b86a" opacity="0.95"/>
                </g>
                <g transform="translate(60,50)">
                  <path d="M0,-58 C26,-58 44,-36 42,-6 C62,2 56,30 36,44 C12,62 -8,60 -34,44 C-52,30 -46,4 -26,-6 C-22,-34 -8,-54 0,-58 Z" fill="url(#s1)"/>
                  <ellipse cx="0" cy="-6" rx="7" ry="6" fill="#331033"/>
                </g>
              </svg>
            </div>

            <!-- Tulip 4 -->
            <div class="tulip sway" data-id="4" style="left:28%;bottom:34%;transform:scale(.94) rotate(-8deg);">
              <div class="hotspot" onclick="showMsg(4,this)"></div>
              <svg viewBox="0 0 120 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <g transform="translate(60,120)">
                  <rect x="-5" y="0" width="10" height="115" rx="5" fill="url(#stem)"/>
                  <path d="M-10 40 C-36 18 -18 -10 -6 -2" fill="#6fbf86" opacity="0.92"/>
                </g>
                <g transform="translate(60,56)">
                  <path d="M0,-54 C22,-54 36,-34 34,-8 C52,0 46,28 26,40 C6,52 -12,50 -30,40 C-44,28 -36,6 -22,-4 C-26,-30 -12,-48 0,-54 Z" fill="url(#s1)"/>
                  <circle cx="0" cy="-10" r="6" fill="#321034"/>
                </g>
              </svg>
            </div>

            <!-- Tulip 5 -->
            <div class="tulip sway" data-id="5" style="left:48%;bottom:40%;transform:scale(1.02) rotate(-2deg);">
              <div class="hotspot" onclick="showMsg(5,this)"></div>
              <svg viewBox="0 0 120 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <g transform="translate(60,120)">
                  <rect x="-6" y="0" width="12" height="118" rx="6" fill="url(#stem)"/>
                </g>
                <g transform="translate(60,58)">
                  <path d="M0,-60 C28,-62 46,-40 44,-10 C66,-4 60,30 34,50 C12,64 -8,62 -34,50 C-62,30 -54,-2 -28,-10 C-32,-40 -18,-60 0,-60 Z" fill="url(#s1)"/>
                  <ellipse cx="0" cy="-6" rx="8" ry="6" fill="#3a1855" opacity="0.95"/>
                </g>
              </svg>
            </div>

            <!-- Tulip 6 -->
            <div class="tulip sway" data-id="6" style="left:68%;bottom:36%;transform:scale(.98) rotate(6deg);">
              <div class="hotspot" onclick="showMsg(6,this)"></div>
              <svg viewBox="0 0 120 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <g transform="translate(60,120)">
                  <rect x="-5" y="0" width="10" height="112" rx="5" fill="url(#stem)"/>
                </g>
                <g transform="translate(60,60)">
                  <path d="M0,-48 C18,-48 30,-30 28,-8 C46,0 40,26 20,36 C2,44 -10,44 -24,36 C-36,26 -32,6 -18,-2 C-20,-20 -8,-36 0,-48 Z" fill="url(#s1)"/>
                  <circle cx="0" cy="-6" r="7" fill="#2b0f33"/>
                </g>
              </svg>
            </div>

            <!-- Tulip 7 -->
            <div class="tulip sway" data-id="7" style="left:20%;bottom:22%;transform:scale(.9) rotate(-14deg);">
              <div class="hotspot" onclick="showMsg(7,this)"></div>
              <svg viewBox="0 0 120 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <g transform="translate(60,120)">
                  <rect x="-4" y="0" width="8" height="110" rx="4" fill="url(#stem)"/>
                </g>
                <g transform="translate(60,56)">
                  <path d="M0,-52 C20,-52 34,-32 32,-8 C50,0 44,26 26,38 C6,50 -12,48 -30,38 C-46,28 -38,6 -24,-4 C-28,-30 -12,-50 0,-52 Z" fill="url(#s1)"/>
                </g>
              </svg>
            </div>

            <!-- Tulip 8 -->
            <div class="tulip sway" data-id="8" style="left:78%;bottom:24%;transform:scale(.92) rotate(10deg);">
              <div class="hotspot" onclick="showMsg(8,this)"></div>
              <svg viewBox="0 0 120 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <g transform="translate(60,120)">
                  <rect x="-6" y="0" width="12" height="118" rx="6" fill="url(#stem)"/>
                </g>
                <g transform="translate(60,62)">
                  <path d="M0,-56 C22,-56 36,-36 34,-8 C52,0 46,28 26,40 C6,52 -12,50 -28,40 C-40,28 -34,6 -20,-4 C-24,-30 -12,-50 0,-56 Z" fill="url(#s1)"/>
                </g>
              </svg>
            </div>

          </div>

          <!-- decorative hearts sprinkled -->
          <svg class="heart" style="left:24%;top:8%" viewBox="0 0 24 24"><path d="M12 21s-7-4.35-9.2-6.1C.6 12.7 1 9 4 7c2.1-1.3 4.7.1 4 2 .7-1.9 3.7-3 5-1 1.3-2 4-3.3 6-1 3 2 3.4 5.7 1.2 7.9C19 16.65 12 21 12 21z" fill="url(#hgrad)" /></svg>
          <svg class="heart" style="left:72%;top:6%;animation-delay:.6s" viewBox="0 0 24 24"><path d="M12 21s-7-4.35-9.2-6.1C.6 12.7 1 9 4 7c2.1-1.3 4.7.1 4 2 .7-1.9 3.7-3 5-1 1.3-2 4-3.3 6-1 3 2 3.4 5.7 1.2 7.9C19 16.65 12 21 12 21z" fill="#ff7fbf" /></svg>

        </div>
      </aside>
    </main>
  </div>

  <!-- Audio element (user: place valiente.mp3 in same folder) -->
  <audio id="bgAudio" src="valiente.mp3" preload="none"></audio>

<script>
  // Mensajes personalizados (uno por tulip)
  const messages = {
    1: {who:'Tus ojos', text: 'Tus ojos guardan la calma de los amaneceres que aún no llegan.'},
    2: {who:'Tus manos', text: 'Tus manos son el refugio donde descansa mi día; su tacto trae paz.'},
    3: {who:'Tu sonrisa', text: 'Tu sonrisa tiene la osadía de transformar mis horas en luz.'},
    4: {who:'Tu voz', text: 'Tu voz es ese susurro que vuelve poesía cada instante.'},
    5: {who:'Tu esencia', text: 'Esa ternura tuya deja huellas suaves en cada pensamiento.'},
    6: {who:'Tu presencia', text: 'Y tú, Leonela, la razón por la que el tiempo se detiene cuando te pienso.'},
    7: {who:'Esa risa', text: 'Tu risa despeja cualquier cielo gris y lo pinta de esperanza.'},
    8: {who:'Cada gesto', text: 'Cada detalle tuyo es verso; cada gesto, un universo en calma.'}
  };

  const garden = document.getElementById('garden');
  // show message bubble near element
  function showMsg(id, el){
    closeBubbles();
    const info = messages[id];
    if(!info) return;

    // create bubble
    const b = document.createElement('div');
    b.className = 'bubble';
    b.id = 'msg'+id;
    b.setAttribute('role','status');
    b.setAttribute('aria-live','polite');

    const who = document.createElement('span');
    who.className = 'who';
    who.textContent = info.who;
    b.appendChild(who);

    const p = document.createElement('div');
    p.textContent = info.text;
    b.appendChild(p);

    garden.appendChild(b);

    // position bubble relative to tulip wrapper
    // the passed el might be the hotspot or the hotspot's parent; ensure we have the tulip element
    let tulipEl = el;
    while(tulipEl && !tulipEl.classList.contains('tulip')) tulipEl = tulipEl.parentElement;
    if(!tulipEl) tulipEl = el;

    positionBubble(b, tulipEl);

    // small hearts effect around the tulip (transient)
    createHearts(tulipEl);

    // auto-close after 6.5s
    setTimeout(()=>{ b && b.remove(); }, 6500);

    // close on outside click/touch
    setTimeout(()=> {
      const handler = (e) => {
        if(!b.contains(e.target) && !tulipEl.contains(e.target)){
          b.remove(); document.removeEventListener('pointerdown', handler);
        }
      };
      document.addEventListener('pointerdown', handler);
    }, 50);
  }

  function positionBubble(b, tulipEl){
    const rGarden = garden.getBoundingClientRect();
    const rTulip = tulipEl.getBoundingClientRect();
    // center above tulip
    let left = rTulip.left - rGarden.left + rTulip.width/2 - b.offsetWidth/2;
    let top = rTulip.top - rGarden.top - b.offsetHeight - 12;
    // if overflow at top, place below
    if(top < 8) top = rTulip.top - rGarden.top + rTulip.height + 12;
    // keep inside garden horizontally
    left = Math.max(8, Math.min(left, rGarden.width - b.offsetWidth - 8));
    b.style.left = left + 'px';
    b.style.top = top + 'px';
  }

  function closeBubbles(){ document.querySelectorAll('.bubble').forEach(x => x.remove()); }

  // create a few tiny hearts near tulip for sparkle
  function createHearts(tulipEl){
    const rect = tulipEl.getBoundingClientRect();
    const gRect = garden.getBoundingClientRect();
    for(let i=0;i<6;i++){
      const h = document.createElementNS('http://www.w3.org/2000/svg','svg');
      h.setAttribute('viewBox','0 0 24 24');
      h.setAttribute('class','heart');
      h.style.left = ( (rect.left - gRect.left) + rect.width * (0.2 + Math.random()*0.6) ) + 'px';
      h.style.top = ( (rect.top - gRect.top) + rect.height * (0.15 + Math.random()*0.5) ) + 'px';
      const path = document.createElementNS('http://www.w3.org/2000/svg','path');
      path.setAttribute('d','M12 21s-7-4.35-9.2-6.1C.6 12.7 1 9 4 7c2.1-1.3 4.7.1 4 2 .7-1.9 3.7-3 5-1 1.3-2 4-3.3 6-1 3 2 3.4 5.7 1.2 7.9C19 16.65 12 21 12 21z');
      path.setAttribute('fill', getRandomHeartColor());
      h.appendChild(path);
      garden.appendChild(h);
      // remove after some time
      setTimeout(()=>{ h.remove(); }, 1400 + Math.random()*900 );
    }
  }
  function getRandomHeartColor(){
    const colors = ['#ff85b8','#ff7fbf','#ffd1ea','#ff9fca'];
    return colors[Math.floor(Math.random()*colors.length)];
  }

  // attach hotspot listeners (delegation)
  document.querySelectorAll('.tulip .hotspot').forEach((hs, idx) => {
    const parent = hs.parentElement;
    const id = parent.getAttribute('data-id');
    hs.addEventListener('click', (e)=>{ showMsg(id, hs); });
    // keyboard support
    parent.setAttribute('tabindex','0');
    parent.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter' || ev.key===' ') { ev.preventDefault(); showMsg(id, hs); } });
  });

  // MUSIC handling
  const audio = document.getElementById('bgAudio');
  const playBtn = document.getElementById('playBtn');
  const muteBtn = document.getElementById('muteBtn');

  function toggleMusic(){
    if(audio.paused){
      audio.play().catch(()=>{ /* autoplay may be blocked until user gesture */ });
      playBtn.textContent = '⏸ Pausar música';
      playBtn.setAttribute('aria-pressed','true');
      audio.volume = 0.78;
    } else {
      audio.pause();
      playBtn.textContent = '🎵 Reproducir música';
      playBtn.setAttribute('aria-pressed','false');
    }
  }
  function toggleMute(){
    audio.muted = !audio.muted;
    muteBtn.textContent = audio.muted ? '🔈 Activar sonido' : '🔊 Silenciar';
  }

  // reposition bubbles on resize/orientation change
  window.addEventListener('resize', ()=>{ closeBubbles(); });
  window.addEventListener('orientationchange', ()=>{ closeBubbles(); });

  // Accessibility: announce when audio not found
  audio.addEventListener('error', ()=> {
    console.warn('Audio no disponible. Coloca valiente.mp3 en la misma carpeta si quieres reproducir la canción.');
  });
</script>
</body>
</html>
